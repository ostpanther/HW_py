# README

Домашнее задание

## Клонирование репозитория

Нужно клонировать репозиторий, а не просто скачать и распаковать архив.
Иначе не будет работать `pre-commit`.

```shell
# вспомнить полный путь к текущей папке (на всякий случай)
pwd
# проверить содержимое текущей папки (на всякий случай)
ls
# клонировать в подпапку
git clone https://github.com/HSE-intro-python-2023-24/<your_repo_name>
# перейти в подпапку
cd <your_repo_name>
```

(Подставьте нужное на место <your_repo_name>. Если вы работаете в powershell,
то вместо команд `pwd`, `cd` и `ls`, возможно, потребуются `Get-Location`, `Set-Location` и `Get-ChildItem`)

Все дальнейшие команды выполняются в предположении, что текущая папка — это корень проекта.

## Установка зависимостей

### Знакомство

Осмыслить используемые модули стандартной библиотеки (по желанию):

- [pathlib.Path](https://docs.python.org/3/library/pathlib.html).

Осмыслить список зависимостей (по желанию):

- [beautiful-soup](https://beautiful-soup-4.readthedocs.io/),
- [colorist](https://jakob-bagterp.github.io/colorist-for-python/),
- [requests](https://docs.python-requests.org/),
- [tqdm](https://tqdm.github.io).

Осмыслить список инструментов разработки (обязательно):

- [black](https://black.readthedocs.io/),
- [ruff](https://docs.astral.sh/ruff/),
- [pre-commit](https://pre-commit.com/).

(“Осмыслить” означает “кратко ответить себе, что это такое и зачем оно нужно”.)

### Установка

```shell
# установить зависимости проекта
pip install -r requirements.txt
# установить инструменты разработки
pip install -r requirements-dev.txt
# подцепить pre-commit к git
pre-commit install
```

## Изучение и запуск кода

### Изучение кода в папке “scripts”

Папка “scripts” оформлена как модуль.

- Специальный файл `__init__.py` выполняется при инициализации модуля.
- Специальный файл `__main__.py` выполняется при запуске модуля как самостоятельной программы.

Инициализация происходит, например, при выполнении команды `import scripts`.

Запуск модуля в общем случае делается так:

```shell
python -m <имя_папки>
python -m <имя_папки> <аргументы>
```

В файлах “download_html.py” и html_to_txt.py” определяются функции для скачивания текстов в формате html и для грубого извлечения текста из html. Файл “clear_txt.py” недописан (ваша задача — дописать его).

### Запуск кода

Вывод справки (help):

```shell
python -m scripts --help
python -m scripts -h
```

Команды для работы:

```shell
# Показать используемые папки
python -m scripts show_paths
# Скачать 'Гражданский кодекс РФ'
python -m scripts download_html
# Извлечь текст из html
python -m scripts html_to_txt
```

## Очистка текста регулярными выражениями

### Постановка задачи

После выполнения предыдущих пунктов вы получили грязные тексты в папке “txt”.
Ваша задача — очистить их с помощью регулярных выражений.

Очевидные пункты:

- Оставить между параграфами не более одной пустой строки (заменить `\n\n\n\n\n` на `\n\n`).
- Удалить следы гиперссылок “[править]” после заголовков.

Творческая задача (возможно, не решаемая на 100%):

- Удалить текстовую обвеску (_“Это произведение не охраняется авторским правом.”_, _“ФорумНовости сайтаАнонсыЛит. известияТрибуна читателяСправкаПожертвовать”_ и тому подобное). Обвеской считается текст, который не является частью Гражданского кодекса РФ.

### Способ решения

В файле “clear_txt.py” найдите следующий список:

```python
# Впишите нужное здесь:
SUBSTITUTIONS = [
    (r"...", "..."),
    (r"...", "..."),
    (r"...", "..."),
    ...
]
```

Замените многоточия на своё решение.

Вы можете оценить результаты замен разными способами. Например, с помощью плагина [CompareFolders](https://marketplace.visualstudio.com/items?itemName=moshfeu.compare-folders). Конечно, можно оценивать и просто глазами.

## Публикация правок

```shell
git add scripts/clear_txt.py
git commit -m "комментарий к коммиту"
git push
```

При выполнении второй команды должны будут запуститься тесты, описанные в файле “.pre-commit-congif.yaml”. Может быть, тесты упадут (black отформатирует текст иначе, ruff даст совет). Тогда вам придётся исправить замечания и попробовать заново.
